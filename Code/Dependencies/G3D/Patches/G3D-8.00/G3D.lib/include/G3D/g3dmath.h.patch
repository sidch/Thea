--- G3D.lib/include/G3D/g3dmath.h	2010-04-01 01:01:20.000000000 -0400
+++ ../../../../../../Downloads/G3D.lib/include/G3D/g3dmath.h	2012-08-19 16:57:34.000000000 -0400
@@ -79,6 +79,9 @@
 */
 
 __inline long int lrint (double flt) {
+#ifdef _M_X64
+    return (long)((flt > 0.0) ? (flt + 0.5) : (flt - 0.5));
+#else
     int intgr;
 
     _asm {
@@ -87,9 +90,13 @@
     };
 
     return intgr;
+#endif
 }
 
 __inline long int lrintf(float flt) {
+#ifdef _M_X64
+    return (long)((flt > 0.0f) ? (flt + 0.5f) : (flt - 0.5f));
+#else
     int intgr;
 
     _asm {
@@ -98,6 +105,7 @@
     };
 
     return intgr;
+#endif
 }
 #endif
 
